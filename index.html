<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Sesión de Crecimiento · Formación</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{--bg:#f6f7fb;--card:#fff;--ink:#0f172a;--muted:#667085;--border:#e6e7eb;--primary:#0b61d6;--ring:rgba(11,97,214,.14);}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.6 Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
.hidden{display:none}
.wrap{max-width:1250px;margin:28px auto;padding:0 18px}
.card{background:var(--card);border:1px solid var(--border);border-radius:18px;box-shadow:0 10px 35px rgba(15,23,42,.04)}
.grid{display:grid;grid-template-columns:360px 1fr;gap:18px;margin-top:18px}
@media (max-width:980px){.grid{grid-template-columns:1fr}}
.brand{display:flex;gap:18px;align-items:center}
.brand img{height:42px;object-fit:contain}

/* ===== Cabecera refinada ===== */
.header-content{padding:10px 0 4px}
.header-content h1{margin:0 0 6px;font-size:26px;font-weight:800;letter-spacing:.2px}
.header-content h2{margin:0 0 4px;font-size:16px;font-weight:700;color:#0b3b8f}
.header-content h3{margin:0;font-size:14px;font-weight:600;color:#475569}
.header-content hr{margin:14px 0;height:1px;border:0;background:linear-gradient(90deg,#e7ecff,transparent)}

/* ===== Sidebar y controles ===== */
.sidebar{padding:16px}
.step{display:flex;align-items:center;gap:10px;margin:8px 0 12px}
.step .num{background:#eef2ff;border:1px solid #dfe5ff;color:#0b3b8f;border-radius:999px;padding:4px 12px;font-weight:800}
.help{font-size:14px;color:var(--muted)}
label{font-size:12px;color:var(--muted);display:block;margin:10px 0 6px}
select,input{width:100%;padding:12px;border:1px solid var(--border);border-radius:12px;background:#fff;outline:none}
select:focus,input:focus{box-shadow:0 0 0 6px var(--ring);border-color:#c7d7f7}
button{padding:12px 16px;border-radius:12px;border:1px solid var(--border);background:#fff;cursor:pointer;font-weight:700}
button.primary{background:var(--primary);color:#fff;border:0}
button:disabled{opacity:.55;cursor:not-allowed}
.kpis{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.kpi{background:#f1f5f9;border:1px solid var(--border);border-radius:999px;padding:6px 10px;font-size:13px}

/* ===== Caja “¿Por qué…?” — versión pulida ===== */
.why{
  margin-top:16px;
  padding:16px 16px 14px;
  border:1px solid var(--border);
  border-radius:16px;
  background:radial-gradient(120% 120% at 0% 0%, #f8fbff 0%, #ffffff 60%);
  box-shadow:0 6px 22px rgba(15,23,42,.05);
}
.why .tag{
  display:inline-flex;gap:8px;align-items:center;
  font-size:12px;color:#0b3b8f;background:#eef2ff;border:1px solid #dfe5ff;
  border-radius:999px;padding:4px 10px;font-weight:800;letter-spacing:.2px;
}
.why h3{margin:10px 0 6px;font-size:15px;font-weight:800}
.why .lead{margin:0 0 10px;font-size:13px;color:#475569}
.why ul{
  --cols:1;margin:10px 0 0;padding:0;list-style:none;
  display:grid;grid-template-columns:repeat(var(--cols),minmax(0,1fr));gap:6px 12px
}
@media (min-width:880px){.why ul{--cols:2}}
.why li{position:relative;padding-left:22px;font-size:14px}
.why li::before{
  content:"";position:absolute;left:0;top:7px;width:10px;height:10px;border-radius:3px;
  background:#0b61d6;box-shadow:0 0 0 3px rgba(11,97,214,.16)
}

/* ===== Panel de la derecha ===== */
.content{padding:16px}
.progress{height:10px;background:#eef2ff;border-radius:999px;overflow:hidden}
.progress>div{height:100%;width:0;background:#80aaff;transition:width .2s ease}
.meta{display:flex;gap:10px;align-items:center;margin:10px 0 8px;color:#64748b;font-size:14px}
.badge{display:inline-flex;align-items:center;gap:6px;background:#eef2ff;border:1px solid #dfe5ff;border-radius:999px;padding:4px 10px;font-size:12px}
.center{display:flex;align-items:center;justify-content:center;padding:28px 10px;color:#64748b;text-align:center}
.hero{display:flex;flex-direction:column;align-items:center;gap:14px}
.hero img{max-width:220px;height:auto;opacity:.9}
.footer{margin:26px auto 10px;color:#64748b;font-size:12px;text-align:center}
.small{font-size:12px;color:#667085}
.diag{margin-top:10px;padding:10px;border:1px dashed #cbd5e1;border-radius:10px;background:#fcfdff;text-align:left;white-space:pre-wrap}
</style>
</head>
<body>
<div class="wrap">

  <!-- Logos -->
  <div class="brand">
    <img src="./img/logo-guadiana.png" alt="Guadiana" onerror="this.style.display='none'">
    <img src="./img/logo-cumbria.png" alt="Cumbria" onerror="this.style.display='none'">
  </div>

  <!-- Cabecera mejorada -->
  <div class="header-content">
    <h1>Sesión de Crecimiento · Formación en Excelencia</h1>
    <h2>No es un examen: es una herramienta para la excelencia</h2>
    <h3>Su objetivo es alinear y fortalecer al equipo para garantizar un servicio de alto nivel en Guadiana y Cumbria.</h3>
    <hr>
    <div class="details">
      <h4 style="margin:0 0 6px;font-size:13px;color:#334155">Detalles</h4>
      <ul style="margin:0 0 4px 18px;padding:0;font-size:13px;color:#475569">
        <li><b>Foco:</b> adaptado por departamento y módulo.</li>
        <li><b>Contenido:</b> 30 preguntas dinámicas (aleatorias y sin repetición).</li>
        <li><b>Propósito:</b> obtener datos claros para personalizar tu plan de desarrollo.</li>
      </ul>
    </div>
  </div>

  <div class="grid">
    <!-- Lado izquierdo -->
    <aside class="card sidebar">
      <div class="step"><span class="num">1</span><b>Estado</b></div>
      <div class="help">Preguntas cargadas: <b id="loaded">0</b></div>

      <div class="step"><span class="num">2</span><b>Filtros</b></div>
      <label for="dept">Departamento (DTO)</label>
      <select id="dept"><option value="">Todos</option></select>

      <label for="mod">Módulo</label>
      <select id="mod"><option value="">Todos</option></select>

      <div class="kpis" id="kpis"></div>

      <div class="step"><span class="num">3</span><b>Nombre y empezar</b></div>
      <input id="who" type="text" placeholder="Nombre y apellidos (obligatorio)">
      <div style="margin-top:12px;display:flex;gap:10px">
        <button id="btnStart" class="primary" disabled>Empezar test</button>
      </div>

      <!-- Caja “Por qué” mejorada -->
      <div class="why">
        <span class="tag">No es un examen — es una herramienta de mejora</span>
        <h3>¿Por qué realizamos estas pruebas?</h3>
        <p class="lead">
          Queremos reforzar hábitos, unificar estándares y detectar oportunidades de mejora sin presiones.
          La excelencia se entrena con práctica guiada.
        </p>
        <ul>
          <li>Refuerzo del conocimiento clave y del uso del PMS.</li>
          <li>Estándares comunes entre Guadiana y Cumbria.</li>
          <li>Detección de áreas de mejora para enfocar la formación.</li>
          <li>Reconocer buenas prácticas que elevan la experiencia del huésped.</li>
        </ul>
      </div>
    </aside>

    <!-- Lado derecho -->
    <section class="card content">
      <div class="progress"><div id="bar"></div></div>
      <div class="meta">
        <span class="badge" id="metaPos">0/0</span>
        <span class="badge" id="metaScore"><b>0</b> aciertos · <b>0</b> fallos</span>
        <span class="badge" id="metaTags"></span>
      </div>

      <div id="holder" class="center">
        <div class="hero">
          <img src="./img/empty.png" alt="Test" onerror="this.src='img/empty.png'">
          <div>
            <b>Elige Departamento → Módulo</b>, escribe tu nombre y pulsa <b>Empezar test</b>.<br>
            Se seleccionarán <b>30 preguntas</b> aleatorias del módulo evitando repetir las ya vistas.
          </div>
          <div id="loadwarn" class="small hidden"></div>
          <div id="diag" class="diag hidden"></div>
        </div>
      </div>
    </section>
  </div>

  <div class="footer">© Formación interna · Sercotel Guadiana y Cumbria Spa&Hotel</div>
</div>

<!-- Inserta aquí tu <script> existente con la lógica del test -->
<script>
/* Aquí va tu JS actual (carga CSV/data.js, filtros, arranque del test, etc.) */
</script>
</body>
</html>
